<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>项目列表</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link rel="stylesheet" type="text/css" href="http://lingling.com/static/layui/css/layui.css" />
    <link rel="stylesheet" type="text/css" href="http://lingling.com/static/css/global.css" />
</head>
<body>
                <div class="main">
                    <table class="layui-hide" id="test"></table>
                </div>

    <script src="http://lingling.com/static/layui/layui.js"></script>
    <script type="text/javascript">
        layui.config({
            base : 'http://lingling.com/static/layui/mods/'
        }).extend({});

        layui.use(['table', 'ajax', 'box'], function() {
            var ajax  = layui.ajax
            ,box      = layui.box
            ,table    = layui.table;

            if (JSON.stringify(layui.data('user_info')) == '{}') {
                box.box('请您登录', function() {
                    location.href = 'login.html';
                });
            }

            table.render({
                elem: '#test'
                ,url: 'http://lingling.com/backstage/project/myproject'
                // ,method: 'post'
                ,contentType: 'application/json'
                ,parseData: function(res){ //res 即为原始返回的数据
                    // console.log(res);
                    return {
                        "code": res.code,   //解析接口状态
                        "msg": res.message, //解析提示文本
                        "data": res.data    //解析数据列表
                    };
                }
                ,done: function(res) {
                    if (res.code) {
                        layui.data('user_info', null); // 本地退出
                        location.href = 'login.html';
                    }
                }
                ,cols: [[
                    {field:'number', title: '编号'}
                    ,{field:'name', title: '项目名称'}
                    ,{field:'start_date', title: '开始时间'}
                    ,{field:'plan_date', title: '计划结束时间'}
                    ,{field:'project_status', title: '项目状态'}
                    ,{field:'priority', title: '项目级别'}
                    ,{field:'client_name', title: '客户名称'}
                    ,{field:'collection_status', title: '收款状态'}
                ]]
            });
        });
    </script>
</body>
</html>